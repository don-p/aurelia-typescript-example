<template>
<require from="../lib/loading-mask/loading-mask"></require>
<require from="../components/tasks-table-grid"></require>

<aside class="blg-right-panel" style="min-width: 900px;">
<loading id="sentalerts-loading" promise.bind="'casePromise'" message-key.bind="'app.loading'">
      
    <ul class="nav nav-tabs nav-append-content">
        <li class.bind="requestType == 'PENDING'?'active':''">
            <a id="tabReceivedRequests"  click.delegate="showRequests('PENDING')">${'cases.caseDetailTab' | t: {caseRefId: selectedCase.caseId}}</a>
        </li>
        <li class.bind="requestType == 'INVITED'?'active':''">
            <a id="tabSentRequests"  click.delegate="showRequests('INVITED')">${'cases.tasksTab' | t : {taskRefId: selectedTask.taskId}}</a>
        </li>

    </ul>
    <div id="requests-tab" class="blg-tab-section tab-content ">
        <div class="blg-inner-content tab-pane active" id="requests">
            <div show.bind="true" class="blg-connection-content">
                <div class="alert-details-received-content" style="height: 100%;">
                    <div class="alert-details-content-scroll" style="height: 100%;">

                            <div show.bind="!!(selectedCase)" class="requestDetailContainer" >
                                <div class="request-details-content case-details-content">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td class="table-label table-label-case-detail">External Reference:</td>
                                                <td class="table-text">${selectedCase.externalReference}</td>                                        
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Case:</td>
                                                <td class="table-text">${selectedCase.title}</td>
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Description:</td>
                                                <td class="table-text">${selectedCase.description}</td>
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Type:</td>
                                                <td class="table-text">${selectedCase.type.typeName}</td>                                        
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Priority:</td>
                                                <td class="table-text">${selectedCase.priority.priorityName}</td>                                        
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Tags:</td>
                                                <td class="table-text">${selectedCase.priority.priorityName}</td>                                        
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Due date:</td>
                                                <td class="table-text">${selectedCase.priority.priorityName}</td>                                        
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Locale:</td>
                                                <td class="table-text">${selectedCase.priority.priorityName}</td>                                        
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div class="case-details-content-right">
                                    <table>
                                        <tbody>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Budget:</td>
                                                <td class="table-text">${selectedCase.externalReference}</td>                                        
                                            </tr>
                                            <tr>
                                                <td class="table-label table-label-case-detail">Other reference:</td>
                                                <td class="table-text">${selectedCase.title}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div show.bind="!!(selectedNotification)" >
                                    <compose view="../components/notificationMessageDetail.html" containerless></compose>
                                </div>
                            </div>
                            <div class="case-tasks-content">
                                <div>Case tasks:</div>
                        <div show.bind="!!(selectedCase.tasks) && selectedCase.tasks.length > 1" class="tasks-table-content">
                            <tasks-table-grid
                                grid-id.bind="tasksGrid"
                                grid-options.bind="gridOptions" 
                                grid-ready-func.bind="onGridReady"
                                pagination-page-size.bind="pageSize"
                                enable-sorting.bind="true"
                                enable-server-side-sorting.bind="false"
                                enable-filter.bind="true"
                                enable-server-side-filter.bind="false"
                                display-columns.bind="['attachments','status','date','id','title', 'assignedTo', 'actions']">
                            </tasks-acks-table-grid>
                        </div>
                                
                            </div>

                    </div>
                </div>
            </div>
            <div show.bind="requestType == 'INVITED'" class="blg-connection-content">
            </div>
        </div>					
    </div>
</loading>
</aside>

</template>