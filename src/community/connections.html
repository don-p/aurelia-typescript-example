<template>
<require from="../lib/loading-mask/loading-mask"></require>

    <ul class="nav nav-tabs nav-append-content">
        <li class.bind="requestType == 'PENDING'?'active':''">
            <a id="tabReceivedRequests"  click.delegate="showRequests('PENDING')">Received requests</a>
        </li>
        <li class.bind="requestType == 'INVITED'?'active':''">
            <a id="tabSentRequests"  click.delegate="showRequests('INVITED')">Sent requests</a>
        </li>
        <li>requestType:${requestType}</li>

    </ul>
    <div id="requests-tab" class="blg-tab-section tab-content ">
        <div class="blg-inner-content tab-pane active" id="requests">
            <div show.bind="requestType == 'PENDING'" class="blg-connection-content">
                <div style="height: 100%;" class="members-table-content" id="membersTableContent">	
                    <ag-grid-aurelia id="receivedRequestsGrid" #agGrid style="width: 100%; " class="ag-fresh"
                                    grid-options.bind="gridOptionsReceived"
                                    column-defs.bind="gridOptionsReceived.columnDefs"
                                    context.bind="$this"
                                    enable-col-resize
                                    enable-sorting
                                    enable-filter="false"
                                    suppress-row-click-selection
                                    debug>
                        <ag-grid-column header-name="${'community.communities.members.firstname' | t}" field="physicalPersonProfile.firstName"></ag-grid-column>
                        <ag-grid-column header-name="${'community.communities.members.lastname' | t}" field="physicalPersonProfile.lastName" ></ag-grid-column>
                        <ag-grid-column header-name="${'community.communities.members.organization' | t}" field="physicalPersonProfile.organization.organizationName" ></ag-grid-column>
                        <ag-grid-column header-name="" >
                            <ag-cell-template>
                                <i if.bind="requestType=='INVITED'" click.delegate="params.context.editConnectionRequest([params.data], 'DECLINE')" class="ico-bin float-right"></i> <i click.delegate="params.context.editConnectionRequest([params.data], 'ACCEPT', 'CONNECTION_ACCEPTED')" class="ico-circle-right6 float-right"></i>
                            </ag-cell-template>
                        </ag-grid-column>
                    </ag-grid-aurelia>       
                </div>
            </div>
            <div show.bind="requestType == 'INVITED'" class="blg-connection-content">
                <div style="height: 100%;" class="members-table-content" id="membersTableContent">	
                   <ag-grid-aurelia id="sentRequestsGrid" #agGrid style="width: 100%;" class="ag-fresh"
                                    grid-options.bind="gridOptionsSent"
                                    column-defs.bind="gridOptionsSent.columnDefs"
                                    context.bind="$this"
                                    enable-col-resize
                                    enable-sorting
                                    enable-filter="false"
                                    suppress-row-click-selection
                                    debug>
                        <ag-grid-column header-name="${'community.communities.members.firstname' | t}" field="physicalPersonProfile.firstName"></ag-grid-column>
                        <ag-grid-column header-name="${'community.communities.members.lastname' | t}" field="physicalPersonProfile.lastName" ></ag-grid-column>
                        <ag-grid-column header-name="${'community.communities.members.organization' | t}" field="physicalPersonProfile.organization.organizationName" ></ag-grid-column>
                        <ag-grid-column header-name="" >
                            <ag-cell-template>
                                <i click.delegate="params.context.editConnectionRequest([params.data], 'TERMINATE', 'REQUEST_TERMINATED')" class="ico-bin float-right"></i>
                            </ag-cell-template>
                        </ag-grid-column>
                    </ag-grid-aurelia>       
                </div>
            </div>
        </div>					
    </div>

</template>