<template>
<require from="../lib/loading-mask/loading-mask"></require>

    <div id="discover-tab" class="blg-tab-section tab-content">
        <div class="blg-inner-content tab-pane active" id="discover">
        editConnectionRequest:${editConnectionRequest} requestType:${requestType}
            <div class="conv-buttons-bar">
                <div class="connections-tabs">
                    <span style="float: left;" class="community-select-label">Requests</span>
                    <a style="float: right;" class.bind="requestType == 'PENDING'?'active':''" click.delegate="showRequests('PENDING')">Received</a>
                    <a style="float: right;" class.bind="requestType == 'INVITED'?'active':''" click.delegate="showRequests('INVITED')">Sent</a>
                </div>
            </div>

            <div show.bind="requestType == 'INVITED'" class="blg-connection-content">
<!--            <loading id="connections-loading" promise.bind="'connectionsPromise'" message-key.bind="'app.loading'">
                <div style="height: 100%;" class="members-table-content" id="membersTableContent">	
                    <div id="sentRequestsGrid" ref="sentRequestsGrid" style="height: 100%;" class="ag-blg" ></div>
                </div>
             </loading> -->
                <div style="height: 100%;" class="members-table-content" id="membersTableContent">	
        <ag-grid-aurelia id="sentRequestsGrid" #agGrid style="width: 100%; height: 350px;" class="ag-fresh"
                         grid-options.bind="gridOptionsSent"
                         column-defs.bind="gridOptionsSent.columnDefs"
                         context.bind="$this"
                         enable-col-resize
                         enable-sorting
                         enable-filter="false"
                         suppress-row-click-selection
                         debug>
        <ag-grid-column header-name="${'community.communities.members.firstname' | t}" field="physicalPersonProfile.firstName"></ag-grid-column>
        <ag-grid-column header-name="${'community.communities.members.lastname' | t}" field="physicalPersonProfile.lastName" ></ag-grid-column>
        <ag-grid-column header-name="${'community.communities.members.organization' | t}" field="physicalPersonProfile.organization.organizationName" ></ag-grid-column>
        <ag-grid-column header-name="" >
            <ag-cell-template>
                <i if.bind="requestType=='INVITED'" click.delegate="$this.editConnectionRequest([data], 'DECLINE')" class="ico-bin float-right"></i> <i click.delegate="editConnectionRequest([connection], 'ACCEPT', 'CONNECTION_ACCEPTED')" class="ico-circle-right6 float-right"></i>
            </ag-cell-template>
        </ag-grid-column>

        </ag-grid-aurelia>       
        editConnectionRequest:${editConnectionRequest}     
                </div>
        </div>
            <div show.bind="requestType == 'PENDING'" class="blg-connection-content">
            <loading id="connections-loading" promise.bind="'connectionsPromise'" message-key.bind="'app.loading'">
                <div style="height: 100%;" class="members-table-content" id="membersTableContent">	
                    <div id="receivedRequestsGrid" ref="receivedRequestsGrid" style="height: 100%;" class="ag-blg" ></div>
                </div>
            </loading>
            </div>
        </div>						
    </div>

</template>