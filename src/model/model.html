<template>
<require from="../lib/loading-mask/loading-mask"></require>

  <ai-dialog id="model-dialog" class="blg-dialog">
    <div class="modal-header">
        <h4 class="modal-title">${title}</h4>
    </div>
    <ai-dialog-body id="model-dialog-body">
    <!--
    <div ref="loadingMask" id="loadingMask-model" class="spinner">
        <div id="loadingTitle" class="loadingTitle">'Loading'</div>
        <div class="mask"></div>
    </div>
    -->
        <section>
            <div class="row errorMessage">
                <div class="col-xs-12">
                    <div i18n="[append]${errorMessage}" if.bind="(model.errorMessage && !(model.errorMessage===undefined)) || (hasValidationErrors)" class="alert alert-danger fade in">
                        <ul>
                            <li repeat.for="error of validationErrors">${error.message}</li>
                        </ul>
                    </div>	
                </div>
            </div>	
            <div class="row textMessage">
                <form id="model-form">
                <compose view="${modelView}" containerless></compose>
                </form>
             </div>
      </section>
    </ai-dialog-body>

    <div class="modal-footer">
      <button class="btn btn-default-blg" if.bind="showCancel && !!showCancel" click.trigger="controller.cancel()">Cancel</button>
      <button id="model-submit-button" type="submit" form="model-form" class="btn btn-info" 
        disabled.bind="!((isDirty) && (!hasValidationErrors))" 
        click.trigger="!!(submit)?submit(item):controller.ok(item)">${okText}</button>
    </div>
    <!--
    <div>errors: ${vController.errors} hasErrors: ${hasValidationErrors} count: ${vController.errors.length} model.errorMessage:${model.errorMessage} isSubmitDisabled:${isSubmitDisabled}</div>
    <div>error: ${vControlerJSON}</div>
    -->
</ai-dialog>
</template>