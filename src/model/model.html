<template>
<require from="../lib/loading-mask/loading-mask"></require>

<loading id="model-loading" promise.bind="'modelPromise'" message-key.bind="'app.loading'">
  <ai-dialog id="model-dialog" class="blg-dialog">
    <div class="modal-header">
        <h4 class="modal-title">${model.title}</h4>
    </div>
    <ai-dialog-body>
        <section>
            <div class="row errorMessage">
                <div class="col-xs-12">
                    <div i18n="[append]${model.errorMessage}" if.bind="(model.errorMessage && !(model.errorMessage===undefined))" class="alert alert-danger fade in">
                    </div>	
                </div>
            </div>			
            <div class="row textMessage">
                <form id="model-form">
                <compose view="${model.modelView}" containerless></compose>
                </form>
            </div>
      </section>
    </ai-dialog-body>

    <div class="modal-footer">
      <button class="btn btn-default-blg" click.trigger="controller.cancel()">Cancel</button>
      <button id="model-submit-button" type="submit" form="model-form" class="btn btn-info" disabled.bind="(model.isSubmitDisabled)" 
        click.trigger="!!(model.submit)?model.submit(model.item):controller.ok(model.item)">${model.okText}</button>
    </div>
  </ai-dialog>
</loading>
</template>