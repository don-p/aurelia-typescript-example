<template>
	<require from="../components/alerts-actions-bar"></require>
	<require from="../components/notifications-table-grid"></require>
	<require from="../components/clear-filter-button"></require>

	<section id="membersTable" class="members-table notifications-table">
		
		<div class="members-table-header" id="membersTableHeader">Sent Notifications</div>
		<aside class="blg-left-panel" style="top:0px;width:720px;">
		<alerts-actions-bar></alerts-actions-bar>

		<div class="members-table-info-bar">
			<div role="status" id="example_info" class="members-table-info">
                <input placeholder="Filter..." type="text" input.delegate="onQuickFilterChanged($event)"/>
                <clear-filter-button  grid-options.bind="gridOptions"></clear-filter-button>
			</div>
		</div>		
		
		<div class="members-table-content" id="membersTableContent">	
			<notifications-table-grid 
				grid-id.bind="membersGrid"
				grid-options.bind="gridOptions" 
				grid-ready-func.bind="onGridReady"
				grid-filter-func.bind="onFilterChanged"
				grid-selection-changed-func.bind="onSelectionChanged"
				row-selection-changed-func.bind="onRowclick"
				pagination-page-size.bind="pageSize"
				enable-sorting.bind="true"
				enable-server-side-sorting.bind="false"
				enable-filter.bind="true"
				enable-server-side-filter.bind="false"
				display-columns.bind="['selection','to','from','message','organization','category','attachments']"></notifications-table-grid>
		</div>
		</aside>
        <aside class="blg-right-panel">
        <div>
            <div show.bind="!!(selectedNotification) && !!(selectedNotificationAcks)" class="requestDetailContainer">
                <div class="request-details-content">
                    <table>
                        <tbody>
                            <tr>
                                <td class="table-label">To:</td>
                                <td class="table-text">${selectedNotification.senderFullName}</td>
                            </tr>
                            <tr>
                                <td class="table-label">Send date:</td>
                                <td class="table-text">${selectedNotification.formattedSentDate}</td>
                            </tr>
                            <tr>
                                <td class="table-label">Alert type:</td>
                                <td class="table-text">${selectedNotification.notificationCategory.categoryName}</td>
                            </tr>
                            <tr>
                                <td class="table-label">Message:</td>
                                <td class="table-text">${selectedNotification.message}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div>
                    <ul >
                    <li  repeat.for="ack of selectedNotificationAcks" >
                        <div>Recipient: ${ack.recipientName}</div>
                        <div>Status: ${ack.ackStatus}</div>
                        <div>Reply: ${ack.ackMessage}</div>
                        <div>Reply date: ${ack.formattedAckDate}</div>
                    </li>
                    </ul>
                    
                </div>
                <div class="modal-footer">
                    <button class="btn btn-danger btn-sm" click.trigger="editConnectionRequest([selectedRequest], 'DECLINE', 'REQUEST_DECLINED')"><i class="ico-cancel-circle2"></i>&nbsp; Decline</button>
                    <button  type="submit" class="btn btn-success btn-sm" click.trigger="editConnectionRequest([selectedRequest], 'ACCEPT', 'REQUEST_ACCEPTED')"><i class="ico-checkmark-circle"></i>&nbsp; Accept</button>
                </div>
            </div>
        </div>
        </aside>

	</section>
<!-- -->
</template>